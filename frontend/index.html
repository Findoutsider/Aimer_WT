<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aimer WT</title>
    <link rel="stylesheet" href="assets/remixicon/remixicon.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 一体化头部 Header -->
    <header class="app-header">
        <!-- 1. 左侧 Logo 区域 (可拖拽) -->
        <div class="header-left drag-region">
            <img src="assets/logo.ico" class="app-logo" alt="Logo">
            <div class="app-brand-wrapper">
                <span class="app-brand-text">Aimer WT</span>
                <span class="app-version-text">v1 Beta</span>
            </div>
        </div>

        <!-- 2. 中间导航菜单 (不可拖拽) -->
        <nav class="header-nav no-drag">
            <button class="nav-btn active" id="btn-home">
                <i class="ri-home-4-line"></i> 主页
            </button>
            <button class="nav-btn" id="btn-lib">
                <i class="ri-archive-line"></i> 语音包库
            </button>
            <button class="nav-btn" id="btn-camo">
                <i class="ri-brush-3-line"></i> 涂装库
            </button>
            <button class="nav-btn" id="btn-sight">
                <i class="ri-crosshair-line"></i> 炮镜库
            </button>
            <button class="nav-btn" id="btn-settings">
                <i class="ri-settings-3-line"></i> 设置
            </button>
        </nav>

        <!-- 3. 右侧工具栏 (主题切换 + 窗口控制) -->
        <div class="header-right no-drag">
            <!-- 主题切换 (月亮) -->
            <button class="icon-btn theme-toggle" id="btn-theme" title="切换主题">
                <i class="ri-moon-line"></i>
            </button>

            <!-- 竖线分隔符 -->
            <div class="header-divider"></div>

            <!-- 窗口控制按钮 -->
            <div class="window-controls">
                <div class="win-btn bili-btn" id="btn-bili" title="访问作者 B 站主页">
                    <i class="ri-bilibili-line"></i>
                </div>
                <div class="win-btn" id="btn-github" title="访问项目 GitHub">
                    <i class="ri-github-line"></i>
                </div>
                <div class="win-btn" id="btn-pin-title" title="置顶窗口">
                    <i class="ri-pushpin-line"></i>
                </div>
                <div class="win-btn" id="btn-minimize">
                    <i class="ri-subtract-line"></i>
                </div>
                <div class="win-btn close-btn" id="btn-close">
                    <i class="ri-close-line"></i>
                </div>
            </div>
        </div>
    </header>

    <div class="main-container">
        
        <div id="page-home" class="page active">
            <div class="home-grid">
                <div class="card status-card">
                    <div class="status-icon" id="status-icon">
                        <i class="ri-wifi-off-line"></i>
                    </div>
                    <div class="status-label">当前连接状态</div>
                    <div class="status-text waiting" id="status-text">未搜索路径</div>
                </div>

                <div class="card path-card">
                    <div class="card-header no-border">
                        <h2>游戏路径</h2>
                        <span class="subtitle">Game Path Directory</span>
                    </div>
                    <div class="input-row">
                        <input type="text" id="input-game-path" placeholder="等待选择或自动搜索..." readonly>
                        <button class="btn secondary" id="btn-browse-path">
                            <i class="ri-folder-open-line"></i> 浏览
                        </button>
                        <button class="btn primary" id="btn-auto-search">
                            <i class="ri-search-line"></i> 自动搜索
                        </button>
                    </div>
                </div>

                <div class="card notice-card">
                    <div class="card-header no-border">
                        <h3 style="display:flex; align-items:center; gap:8px;">
                            <i class="ri-megaphone-line" style="color:var(--primary)"></i>
                            公告栏
                        </h3>
                    </div>
                    <div class="notice-content">
                        <p><strong>软件没有自动更新功能，更新请关注UP动态和投稿</strong></p>
                        <p>📌 <strong>使用步骤教程：</strong></p>
                        <ul>
                            <li>1. <strong>定位游戏：</strong> 在首页点击“自动搜索”或手动“浏览”定位到《战争雷霆》安装目录。</li>
                            <li>2. <strong>准备文件：</strong> 将下载的语音包 ZIP 压缩包放入软件目录下的 <code>[待解压区]</code> 文件夹中。</li>
                            <li>3. <strong>导入包体：</strong> 切换到“语音包库”页面，点击“导入 ZIP”按钮，软件会自动解压并识别信息，你也可以自己解压放到语音包库中。</li>
                            <li>4. <strong>一键加载：</strong> 在库中找到目标语音包，点击“加载”图标。软件会自动配置 <code>config.blk</code> 并安装。</li>
                            <li>5. <strong>开启 Mod：</strong> 软件会自动检测并开启游戏内的 Mod 支持。若未生效，请检查 <code>config.blk</code> 中是否有 <code>enable_mod:b=yes</code>，如果有问题先联系语音包制作者。</li>
                        </ul>
                        <p>祝您在战场上一路长虹！(๑•̀ㅂ•́)و✧</p>
                    </div>
                </div>

                <div class="card log-card">
                    <div class="card-header no-border">
                        <h3>运行日志</h3>
                        <span class="subtitle">System Log</span>
                        <div style="flex:1"></div>
                        <button class="btn small secondary" id="btn-clear-logs">
                            <i class="ri-delete-bin-line"></i> 清空
                        </button>
                    </div>
                    <div class="log-container" id="log-container">
                        <div class="log-line info">[System] 界面 UI 引擎加载完毕...</div>
                        <div class="log-line sys">[System] 等待用户指令...</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="page-lib" class="page">
            <div class="toolbar-v2">
                <div class="toolbar-v2-content">
                    <div class="toolbar-v2-left">
                        <button class="btn-v2 primary" id="btn-import-zip">
                            <i class="ri-file-zip-line"></i>
                            <span>导入 ZIP</span>
                        </button>
                        <div class="btn-v2-group">
                            <button class="btn-v2" id="btn-open-library" title="打开库目录">
                                <i class="ri-folder-2-line"></i>
                                <span>库目录</span>
                            </button>
                            <button class="btn-v2" id="btn-open-pending" title="打开待解压区">
                                <i class="ri-folder-download-line"></i>
                                <span>待解压区</span>
                            </button>
                            <button class="btn-v2" id="btn-open-game" title="打开游戏根目录">
                                <i class="ri-gamepad-line"></i>
                                <span>游戏目录</span>
                            </button>
                        </div>
                    </div>
                    <div class="toolbar-v2-right">
                        <div class="search-v2">
                            <i class="ri-search-2-line"></i>
                            <input type="text" 
                                   id="input-search-library"
                                   placeholder="搜索作者或标题...">
                        </div>
                        <button class="btn-v2 icon-only" id="btn-refresh-voice" title="刷新">
                            <i class="ri-refresh-line"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="lib-scroll-area" id="lib-list">
                <div class="empty-state">
                    <i class="ri-inbox-archive-line"></i>
                    <h3>这里空空如也</h3>
                    <p>请将 ZIP 包放入 [待解压区] 并点击左上角导入</p>
                </div>
            </div>
        </div>

        <div id="page-camo" class="page">
            <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; animation: fadeIn 0.4s ease-out;">
                <img src="assets/coming_soon_img.png" alt="Coming Soon" style="width: 320px; height: auto; object-fit: contain; margin-bottom: 20px;">
                <p style="margin-top: 12px; color: var(--text-sec); font-size: 20px;">这个区域以后再来探索吧~</p>
            </div>
        </div>

        <div id="page-sight" class="page">
            <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; animation: fadeIn 0.4s ease-out;">
                <img src="assets/coming_soon_img.png" alt="Coming Soon" style="width: 320px; height: auto; object-fit: contain; margin-bottom: 20px;">
                <p style="margin-top: 12px; color: var(--text-sec); font-size: 20px;">这个区域以后再来探索吧~</p>
            </div>
        </div>

        <div id="page-settings" class="page">
            <div class="card">
                <div class="card-header">
                    <h2>资源管理</h2>
                </div>
                <div class="settings-grid">
                    <button class="btn big-btn secondary" id="btn-settings-pending">
                        <i class="ri-folder-download-line"></i>
                        打开待解压区
                    </button>
                    <button class="btn big-btn secondary" id="btn-settings-library">
                        <i class="ri-folder-2-line"></i>
                        打开语音包库
                    </button>
                    <button class="btn big-btn secondary placeholder" id="btn-settings-camo" style="opacity: 0.6; cursor: default;">
                        <i class="ri-brush-3-line"></i>
                        打开涂装库
                    </button>
                    <button class="btn big-btn secondary placeholder" id="btn-settings-sight" style="opacity: 0.6; cursor: default;">
                        <i class="ri-crosshair-line"></i>
                        打开炮镜库
                    </button>
                    </div>
            </div>

            <div class="settings-split-row">
                <div class="card" id="theme-card">
                    <div class="card-header">
                        <h2>个性化</h2>
                        <span class="subtitle">Appearance & Themes</span>
                    </div>
                    <div style="padding: 20px;">
                        <label style="font-size: 12px; color: var(--text-sec); display: block; margin-bottom: 8px;">
                            选择界面风格
                        </label>
                        <select id="theme-select" class="theme-select" style="width: 100%;">
                            <option value="default.json">默认主题 (Default)</option>
                        </select>
                    </div>
                </div>

                <div class="card" id="restore-card">
                    <div class="card-header">
                        <h2 style="color: var(--status-error);">还原</h2>
                    </div>
                    <div style="padding: 20px;">
                        <button class="btn danger full-width" id="btn-restore-game" style="width: 100%;">
                            <i class="ri-alert-line"></i> 一键还原纯净模式 (清空 mod 文件夹并禁用配置文件开关)
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="modal-overlay" id="modal-install">
        <div class="modal-content">
            <h2>选择要加载的模块</h2>
            <p class="subtitle" style="margin-bottom: 10px;">已根据文件自动检测可用模块</p>
            
            <div class="toggle-grid" id="install-toggles">
                </div>

            <div class="modal-actions">
                <button class="btn secondary" id="btn-cancel-install">取消</button>
                <button class="btn primary" id="btn-confirm-install">
                    <i class="ri-rocket-line"></i> 立即加载
                </button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-confirm">
        <div class="modal-content">
            <h2 id="confirm-title" style="margin-top: 0; color: var(--text-main);">操作确认</h2>
            <p id="confirm-message" style="margin-bottom: 25px; color: var(--text-sec); font-size: 14px; line-height: 1.5;"></p>
            
            <div class="modal-actions">
                <button class="btn secondary" id="btn-confirm-cancel">取消</button>
                <button class="btn danger" id="btn-confirm-ok">
                    <i class="ri-delete-bin-line"></i> 确认删除
                </button>
            </div>
        </div>
    </div>

    <!-- 导入方式选择模态框 -->
    <div class="modal-overlay" id="modal-import">
        <div class="modal-content" style="max-width: 500px;">
            <h2>导入语音包</h2>
            <p class="subtitle" style="margin-bottom: 25px;">请选择一种导入方式</p>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <button class="btn big-btn secondary square-btn" id="btn-import-selected">
                    <i class="ri-folder-open-line"></i>
                    <div class="btn-text">
                        <div class="title">选择文件导入</div>
                        <div class="desc">浏览本地 ZIP 文件</div>
                    </div>
                </button>
                
                <button class="btn big-btn primary square-btn" id="btn-import-pending">
                    <i class="ri-file-zip-line"></i>
                    <div class="btn-text">
                        <div class="title">一键批量导入</div>
                        <div class="desc">扫描 [待解压区]</div>
                    </div>
                </button>
            </div>

            <div class="modal-actions" style="margin-top: 25px;">
                <button class="btn secondary" id="btn-cancel-import" style="width: 100%;">取消</button>
            </div>
        </div>
    </div>

    <!-- 用户协议模态框 -->
    <div class="modal-overlay" id="modal-disclaimer">
        <div class="modal-content disclaimer-modal">
            <h2 class="disclaimer-title">免责声明</h2>
            
            <div class="disclaimer-divider"></div>

            <div id="disclaimer-text" class="disclaimer-content">
                <p>此程序为Aimer WT的Go分支，以下为原作者声明</p>
                <hr>
                <p>本人开发这款工具的初衷是希望能让大家更方便的体验个性化语音的乐趣。在开发过程中，我已经倾尽全力去完善每一个功能，并进行了多次测试，力求让它运行得更稳定、更安全。</p>
                <p>但毕竟我只是一个人在利用业余时间开发。能力也有限，面对千差万别的电脑环境和游戏更新，我没办法保证它在每一个细节上都完美无缺。即便我非常希望它能成为对你有用的工具，也必须说明：由于个人技术和精力的局限性，我无法 100% 保证程序在所有情况下都不出 Bug，也无法预见它是否会与你的系统或其他软件产生冲突（比如极其罕见的蓝屏、文件丢失或损坏）。</p>
                <p>所以，请你在使用前务必阅读下方的法律条款，并建议你养成备份原文件的好习惯，感谢。</p>

                <h3>免责声明</h3>
                <p><strong>重要提示：在使用本软件前，请仔细阅读以下免责声明。使用本软件即表示您已充分理解并同意本声明的所有条款。</strong></p>

                <h4>1. 软件性质</h4>
                <p>本软件为第三方开发的非官方工具，与《战争雷霆》游戏开发商 Gaijin Entertainment 及其关联公司无任何关联。本软件按 GNU General Public License v3.0 (GPL v3) 协议开源发布，仅作为个人学习交流目的而开发。</p>

                <h4>2. GPL v3 许可声明</h4>
                <p>本程序是自由软件：您可以自由地重新分发和/或修改它，依据 GNU 通用公共许可证（GPL v3）的条款，由自由软件基金会发布。本程序发布的目的是希望它有用，但不提供任何担保；甚至没有对适销性或特定用途适用性的暗示担保。有关详细信息，请参阅 GNU 通用公共许可证。</p>

                <h4>3. 使用风险</h4>
                <ul>
                    <li>用户使用本软件所产生的一切后果由用户自行承担。</li>
                    <li>修改游戏文件可能导致游戏出现异常、崩溃或无法正常运行。</li>
                    <li>使用本软件可能违反游戏服务条款，可能导致游戏账号受到限制或封禁。</li>
                    <li>开发者不对因使用本软件导致的任何直接或间接损失负责。</li>
                </ul>

                <h4>4. 数据安全</h4>
                <ul>
                    <li>建议用户在使用本软件前备份游戏文件及重要数据。</li>
                    <li>本软件不保证数据的完整性、准确性或可用性。</li>
                    <li>因软件故障、误操作或其他原因导致的数据丢失，开发者不承担责任。</li>
                </ul>

                <h4>5. 软件免责</h4>
                <ul>
                    <li>本软件按"现状"提供，不提供任何明示或暗示的保证。</li>
                    <li>开发者不保证软件无错误、无漏洞或持续可用。</li>
                    <li>开发者保留随时停止维护、更新或分发本软件的权利，且无需提前通知。</li>
                </ul>

                <h4>6. 法律责任</h4>
                <ul>
                    <li>用户应自行承担使用本软件的法律风险。</li>
                    <li>如因使用本软件引发任何法律纠纷，由用户自行解决，开发者概不负责。</li>
                    <li><strong>用户在分发或使用本软件时，应遵守 GPL v3 协议及相关法律法规。</strong></li>
                </ul>

                <h4>7. 语音包内容</h4>
                <ul>
                    <li>本软件仅提供语音包等资源的管理功能，不制作、分发语音包内容。</li>
                    <li>用户导入的语音包内容及其版权归属原作者。</li>
                    <li>用户应确保使用的语音包内容合法合规，不侵犯他人权益。</li>
                </ul>

                <h4>8. 免责更新</h4>
                <p>开发者保留随时修改本免责声明的权利，修改后的声明自发布之日起生效。</p>
                <p class="text-muted" style="margin-top: 20px; text-align: right;">最后更新日期：2026年1月10日</p>
            </div>
            
            <div class="disclaimer-divider"></div>

            <div class="disclaimer-footer">
                <div id="disclaimer-timer-hint"></div>
                <div class="disclaimer-actions-row">
                    <button class="btn-disclaimer reject" id="btn-disclaimer-reject">拒绝</button>
                    <button class="btn-disclaimer agree" id="btn-disclaimer-agree" disabled>同意</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 自定义提示弹窗 (替代原生 alert) -->
    <div class="modal-overlay" id="modal-alert">
        <div class="modal-content" style="max-width: 380px; text-align: center;">
            <div id="alert-icon" style="margin-bottom: 16px;">
                <i class="ri-information-line" style="font-size: 48px; color: var(--primary);"></i>
            </div>
            <h2 id="alert-title" style="margin: 0 0 12px 0; color: var(--text-main);">提示</h2>
            <p id="alert-message" style="margin-bottom: 24px; color: var(--text-sec); font-size: 14px; line-height: 1.6;"></p>
            
            <div class="modal-actions" style="justify-content: center;">
                <button class="btn primary" id="btn-alert-ok" style="min-width: 120px;">
                    <i class="ri-check-line"></i> 知道了
                </button>
            </div>
        </div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <!-- 错误提示框 (Toast 风格) -->
    <div id="toast-error" class="toast-error">
        <div class="toast-error-content">
            <i class="ri-error-warning-line toast-error-icon"></i>
            <div class="toast-error-text">
                <div class="toast-error-title">错误</div>
                <div class="toast-error-message"></div>
            </div>
            <button class="toast-error-close" id="toast-error-close">
                <i class="ri-close-line"></i>
            </button>
        </div>
    </div>

    <!-- 警告提示框 (Toast 风格) -->
    <div id="toast-warn" class="toast-warn">
        <div class="toast-warn-content">
            <i class="ri-alert-line toast-warn-icon"></i>
            <div class="toast-warn-text">
                <div class="toast-warn-title">警告</div>
                <div class="toast-warn-message"></div>
            </div>
            <button class="toast-warn-close" id="toast-warn-close">
                <i class="ri-close-line"></i>
            </button>
        </div>
    </div>

    <!-- 提示提示框 (Toast 风格) -->
    <div id="toast-info" class="toast-info">
        <div class="toast-info-content">
            <i class="ri-information-line toast-info-icon"></i>
            <div class="toast-info-text">
                <div class="toast-info-title">提示</div>
                <div class="toast-info-message"></div>
            </div>
            <button class="toast-info-close" id="toast-info-close">
                <i class="ri-close-line"></i>
            </button>
        </div>
    </div>

    <script src="loading_voice_package.js"></script>
    <script type="module" src="script.js"></script>
    <script type="module">
        // 补充一点点 JS 逻辑：需要更新 script.js 里的图标生成部分
        // 因为 script.js 还是用的 Emoji，我们需要微调 createModCard 函数
        // 但为了保持文件独立性，我在 script.js 底部覆盖它
        
        // 注意：你需要手动更新 script.js 的 createModCard 和 installModal 逻辑
        // 或者直接用我下面提供的 script.js 更新片段
    </script>
</body>
</html>
